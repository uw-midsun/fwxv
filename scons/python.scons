import subprocess
import os

Import("VARS")

TARGET = VARS.get("TARGET")

def run_python(target, source, env):
    py_env = os.environ.copy()
    py_env["PYTHONPATH"] = os.path.abspath("py/")
    subprocess.run(["python3", f"py/{TARGET}/main.py"], env=py_env).check_returncode()

py = Command('py.txt', [], run_python)
Default(py)
